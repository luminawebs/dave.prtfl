{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const LanguageContext=/*#__PURE__*/createContext();export const useLanguage=()=>{const context=useContext(LanguageContext);if(!context){throw new Error('useLanguage must be used within a LanguageProvider');}return context;};export const LanguageProvider=_ref=>{let{children}=_ref;const[language,setLanguage]=useState(()=>{// Extract language from URL if available\nconst path=window.location.pathname;const urlLang=path.split('/')[1];if(['es','en'].includes(urlLang)){return urlLang;}// Check for saved language preference\nconst savedLanguage=localStorage.getItem('edunest-language');if(savedLanguage){return savedLanguage;}// Check browser language\nconst browserLanguage=navigator.language||navigator.userLanguage;if(browserLanguage.startsWith('es')){return'es';}// Default to Spanish\nreturn'es';});useEffect(()=>{localStorage.setItem('edunest-language',language);document.documentElement.lang=language;},[language]);// GeoIP-based language detection (only on first visit)\nuseEffect(()=>{const savedLanguage=localStorage.getItem('edunest-language');if(savedLanguage)return;// user already has preference\n// Fetch geolocation info from free ipapi.co (1k req/day free)\nfetch('https://ipapi.co/json/').then(res=>res.ok?res.json():null).then(data=>{if(!data)return;const country=data.country_code;// Simple mapping: common English-speaking countries → 'en', rest → 'es'\nconst englishCountries=['US','GB','CA','AU','NZ','IE'];const detectedLang=englishCountries.includes(country)?'en':'es';setLanguage(detectedLang);}).catch(()=>{/* silent fail – keep current language */});},[]);const switchLanguage=newLanguage=>{setLanguage(newLanguage);};// Helper to get localized path\nconst getLocalizedPath=function(path){let lang=arguments.length>1&&arguments[1]!==undefined?arguments[1]:language;// Remove leading slash if present\nconst cleanPath=path.startsWith('/')?path.slice(1):path;// Return path with language prefix\nreturn\"/\".concat(lang).concat(cleanPath?\"/\".concat(cleanPath):'');};const value={language,switchLanguage,getLocalizedPath,isSpanish:language==='es',isEnglish:language==='en'};return/*#__PURE__*/_jsx(LanguageContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","LanguageContext","useLanguage","context","Error","LanguageProvider","_ref","children","language","setLanguage","path","window","location","pathname","urlLang","split","includes","savedLanguage","localStorage","getItem","browserLanguage","navigator","userLanguage","startsWith","setItem","document","documentElement","lang","fetch","then","res","ok","json","data","country","country_code","englishCountries","detectedLang","catch","switchLanguage","newLanguage","getLocalizedPath","arguments","length","undefined","cleanPath","slice","concat","value","isSpanish","isEnglish","Provider"],"sources":["D:/00 Lumina Interactiva/website/Strategy/edunest.co/src/contexts/LanguageContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst LanguageContext = createContext();\r\n\r\nexport const useLanguage = () => {\r\n  const context = useContext(LanguageContext);\r\n  if (!context) {\r\n    throw new Error('useLanguage must be used within a LanguageProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const LanguageProvider = ({ children }) => {\r\n  const [language, setLanguage] = useState(() => {\r\n    // Extract language from URL if available\r\n    const path = window.location.pathname;\r\n    const urlLang = path.split('/')[1];\r\n    if (['es', 'en'].includes(urlLang)) {\r\n      return urlLang;\r\n    }\r\n    \r\n    // Check for saved language preference\r\n    const savedLanguage = localStorage.getItem('edunest-language');\r\n    if (savedLanguage) {\r\n      return savedLanguage;\r\n    }\r\n    \r\n    // Check browser language\r\n    const browserLanguage = navigator.language || navigator.userLanguage;\r\n    if (browserLanguage.startsWith('es')) {\r\n      return 'es';\r\n    }\r\n    \r\n    // Default to Spanish\r\n    return 'es';\r\n  });\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('edunest-language', language);\r\n    document.documentElement.lang = language;\r\n  }, [language]);\r\n\r\n  // GeoIP-based language detection (only on first visit)\r\n  useEffect(() => {\r\n    const savedLanguage = localStorage.getItem('edunest-language');\r\n    if (savedLanguage) return; // user already has preference\r\n\r\n    // Fetch geolocation info from free ipapi.co (1k req/day free)\r\n    fetch('https://ipapi.co/json/')\r\n      .then((res) => res.ok ? res.json() : null)\r\n      .then((data) => {\r\n        if (!data) return;\r\n        const country = data.country_code;\r\n        // Simple mapping: common English-speaking countries → 'en', rest → 'es'\r\n        const englishCountries = ['US', 'GB', 'CA', 'AU', 'NZ', 'IE'];\r\n        const detectedLang = englishCountries.includes(country) ? 'en' : 'es';\r\n        setLanguage(detectedLang);\r\n      })\r\n      .catch(() => {\r\n        /* silent fail – keep current language */\r\n      });\r\n  }, []);\r\n\r\n  const switchLanguage = (newLanguage) => {\r\n    setLanguage(newLanguage);\r\n  };\r\n\r\n  // Helper to get localized path\r\n  const getLocalizedPath = (path, lang = language) => {\r\n    // Remove leading slash if present\r\n    const cleanPath = path.startsWith('/') ? path.slice(1) : path;\r\n    // Return path with language prefix\r\n    return `/${lang}${cleanPath ? `/${cleanPath}` : ''}`;\r\n  };\r\n\r\n\r\n  const value = {\r\n    language,\r\n    switchLanguage,\r\n    getLocalizedPath,\r\n    isSpanish: language === 'es',\r\n    isEnglish: language === 'en'\r\n  };\r\n\r\n  return (\r\n    <LanguageContext.Provider value={value}>\r\n      {children}\r\n    </LanguageContext.Provider>\r\n  );\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}